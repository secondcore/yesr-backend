Ext.define("Ext.layout.container.Container",{extend:"Ext.layout.Layout",alternateClassName:"Ext.layout.ContainerLayout",mixins:{elementCt:"Ext.util.ElementContainer"},requires:["Ext.XTemplate"],type:"container",manageOverflow:0,beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,childEls:["overflowPadderEl"],renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,reserveScrollbar:false,lastOverflowAdjust:{width:0,height:0},constructor:function(){this.callParent(arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent();this.mixins.elementCt.destroy.call(this)},initLayout:function(){var b=this,a=Ext.getScrollbarSize().width;b.callParent();if(a&&b.manageOverflow&&!b.hasOwnProperty("lastOverflowAdjust")){if(b.owner.autoScroll||b.reserveScrollbar){b.lastOverflowAdjust={width:a,height:0}}}},beginLayout:function(a){this.callParent(arguments);a.targetContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(c,a){var b=this,d=b.overflowPadderEl;b.callParent(arguments);if(!c.state.overflowAdjust){c.state.overflowAdjust=b.lastOverflowAdjust}if(a){if(b.usesContainerHeight){++c.consumersContainerHeight}if(b.usesContainerWidth){++c.consumersContainerWidth}}if(d){d.setStyle("display","none")}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},cacheChildItems:function(e){var c=e.context,f=[],a=this.getVisibleItems(),d=a.length,b;e.childItems=f;e.visibleItems=a;for(b=0;b<d;++b){f.push(c.getCmp(a[b]))}},cacheElements:function(){var a=this.owner;this.applyChildEls(a.el,a.id)},calculateContentSize:function(p,l){var A=this,d=(l||0)|A.manageOverflow|((p.widthModel.shrinkWrap?1:0)|(p.heightModel.shrinkWrap?2:0)),c=(d&1)||undefined,h=(d&2)||undefined,b=p.childItems,f=b.length,v=0,t=0,m=0,e=p.props,q,o,n,z,g,k,s,y,x,r,w,a,u,j;if(c){if(isNaN(e.contentWidth)){++m}else{c=undefined}}if(h){if(isNaN(e.contentHeight)){++m}else{h=undefined}}if(m){for(w=0;w<f;++w){s=b[w];k=s.target;r=h&&s.getProp("height");u=c&&s.getProp("width");a=s.getMarginInfo();if((c&&isNaN(k.x))||(h&&isNaN(k.y))){j=k.el.getXY();if(!q){q=p.targetContext.el.getXY();g=p.targetContext.getBorderInfo();o=q[0]+g.left;n=q[1]+g.top}y=j[0]-o;x=j[1]-n}else{y=k.x;x=k.y}r+=a.bottom;u+=a.right;v=Math.max(v,x+r);t=Math.max(t,y+u);if(isNaN(v)&&isNaN(t)){A.done=false;return}}if(c||h){z=p.targetContext.getPaddingInfo()}if(c&&!p.setContentWidth(t+z.right)){A.done=false}if(h&&!p.setContentHeight(v+z.bottom)){A.done=false}}},calculateOverflow:function(m,r,g){var v=this,a=v.owner,k=v.manageOverflow,d=m.state,l=d.overflowAdjust,f,j,c,n,b,p,s,i,q,e,o,t,h,u;if(k&&!d.secondPass&&!v.reserveScrollbar){if(a.autoScroll){h=u=true}else{if(a.overflowX){h=a.overflowX=="auto"}else{p=m.targetContext.getStyle("overflow-x");h=p&&p!="hidden"&&p!="scroll"}if(a.overflowY){u=a.overflowY=="auto"}else{p=m.targetContext.getStyle("overflow-y");u=p&&p!="hidden"&&p!="scroll"}}if(!r.gotWidth){h=false}if(!r.gotHeight){u=false}if(h||u){s=Ext.getScrollbarSize();i=m.peek("contentWidth");q=m.peek("contentHeight");e=r.width;o=r.height;t=v.getScrollbarsNeeded(e,o,i,q);d.overflowState=t;if(typeof g=="number"){t&=~g}l={width:(h&&(t&2))?s.width:0,height:(u&&(t&1))?s.height:0};if(l.width!==v.lastOverflowAdjust.width||l.height!==v.lastOverflowAdjust.height){v.done=false;m.invalidate({state:{overflowAdjust:l,overflowState:d.overflowState,secondPass:true}})}}}if(!v.done){return}c=m.padElContext||(m.padElContext=m.getEl("overflowPadderEl",v));if(c){t=d.overflowState;f=r.width;j=0;if(t){n=m.targetContext.getPaddingInfo();b=v.scrollRangeFlags;if((t&2)&&(b&1)){j+=n.bottom}if((t&1)&&(b&4)){f+=n.right}c.setProp("display","");c.setSize(f,j)}else{c.setProp("display","none")}}},configureItem:function(c){var b=this,a=b.owner.itemCls,d=[].concat(b.itemCls||[]);b.callParent(arguments);if(a){d=Ext.Array.push(d,a)}c.addCls(d)},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(b,e){var c=e.$comp.layout,a=c.getRenderTpl(),d=c.getRenderData();a.applyOut(d,b)},doRenderItems:function(b,d){var c=d.$layout,a=c.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,b)}},doRenderPadder:function(b,d){var c=d.$layout,a=c.owner,e=c.getScrollRangeFlags();if(c.manageOverflow==2){if(e&5){b.push('<div id="',a.id,'-overflowPadderEl" ','style="font-size: 1px; width:1px; height: 1px;');b.push('"></div>');c.scrollRangeFlags=e}}},finishRender:function(){var b=this,c,a;b.callParent();b.cacheElements();c=b.getRenderTarget();a=b.getLayoutItems();if(b.targetCls){b.getTarget().addCls(b.targetCls)}b.finishRenderItems(c,a)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(c,g){var d=c.targetContext,f=d.getFrameInfo(),j=d.getPaddingInfo(),i=0,k=0,a=c.state.overflowAdjust,e,h,b,l;if(!c.widthModel.shrinkWrap){++k;b=g?d.getDomProp("width"):d.getProp("width");e=(typeof b=="number");if(e){++i;b-=f.width+j.width;if(a){b-=a.width}}}if(!c.heightModel.shrinkWrap){++k;l=g?d.getDomProp("height"):d.getProp("height");h=(typeof l=="number");if(h){++i;l-=f.height+j.height;if(a){l-=a.height}}}return{width:b,height:l,needed:k,got:i,gotAll:i==k,gotWidth:e,gotHeight:h}},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var e=this,g=e.getRenderTarget(),a=e.getLayoutItems(),d=a.length,f=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&e.isValidParent(c,g,b)){f.push(c)}}return f},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var a,c=this.owner.items,d,b={};do{d=c.generation;a=this.getItemsRenderTree(this.getLayoutItems(),b)}while(c.generation!==d);return a},getScrollbarsNeeded:function(c,h,b,g){var a=Ext.getScrollbarSize(),e=typeof c=="number",i=typeof h=="number",f=0,d=0;if(!a.width){return 0}if(i&&h<g){d=2;c-=a.width}if(e&&c<b){f=1;if(!d&&i){h-=a.height;if(h<g){d=2}}}return d+f},getScrollRangeFlags:(function(){var a=-1;return function(){if(a<0){var f=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"border-box",style:{width:"100px",height:"100px",padding:"10px",overflow:"auto"},children:[{style:{border:"1px solid red",width:"150px",height:"150px",margin:"0 5px 5px 0"}}]}),d=f.dom.scrollHeight,c=f.dom.scrollWidth,e={175:0,165:1,170:2,160:3},b={175:0,165:4,170:8,160:12};a=(e[d]||0)|(b[c]||0);f.remove()}return a}}()),getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var f=this.getRenderTarget(),b=this.getLayoutItems(),e=b.length,a=[],c,d;for(c=0;c<e;c++){d=b[c];if(d.rendered&&this.isValidParent(d,f,c)&&d.hidden!==true){a.push(d)}}return a},setupRenderTpl:function(b){var a=this;b.renderBody=a.doRenderBody;b.renderContainer=a.doRenderContainer;b.renderItems=a.doRenderItems;b.renderPadder=a.doRenderPadder}});