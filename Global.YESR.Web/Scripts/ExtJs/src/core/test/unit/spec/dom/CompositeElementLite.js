describe("Ext.CompositeElementLite",function(){var i,b,j,g=6,h=5,a=4,f=5,k=4,e=2,c=2,d=3,l=2,m=function(n){return document.getElementById(n)};beforeEach(function(){i=Ext.getBody().createChild({id:"mainRoot"});i.dom.innerHTML=['<div class="foo toFilter" id="a">','<div class="child1">c1</div>','<div class="child2">c2</div>','<div class="child1">c3</div>','<div class="child2">c4</div>',"</div>",'<div class="bar" id="b"></div>','<div class="baz" id="c"></div>','<div class="foo" id="d"></div>','<div class="bar" id="e"></div>','<div class="baz" id="f"></div>','<div class="foo toFilter" id="g"></div>','<div class="bar" id="h"></div>','<div class="baz" id="i"></div>','<div class="foo" id="j"></div>','<div class="bar" id="k"></div>','<div class="baz" id="l"></div>','<div class="foo" id="m"></div>','<div class="bar" id="n"></div>','<div class="foo" id="o"></div>','<div class="child1" id="p"></div>','<div class="child2" id="q"></div>','<div class="child1" id="r"></div>','<div class="child2" id="s"></div>','<div class="child1" id="t"></div>'];j=function(o,n){b=new Ext.CompositeElementLite(o,n)}});afterEach(function(){i.remove();j=i=b=null});describe("add",function(){it("should accept a selector",function(){j();b.add(".foo");expect(b.getCount()).toBe(g)});it("should accept a selector with a root",function(){j();b.add(".child1","a");expect(b.getCount()).toBe(e)});it("should accept another CompositeElement",function(){var n=new Ext.CompositeElementLite();n.add(m("a"));n.add(m("b"));n.add(m("c"));j();b.add(n);expect(b.getCount()).toBe(3)});it("should accept an array of elements",function(){j();b.add([m("a"),m("b")]);expect(b.getCount()).toBe(2)});it("should accept a NodeList",function(){j();b.add(m("a").getElementsByTagName("div"));expect(b.getCount()).toBe(4)});it("should accept a single element",function(){j();b.add(m("a"));expect(b.getCount()).toBe(1)});it("should accept a null argument",function(){j();expect(b.add(null)).toBe(b)});it("should return the CompositeElement",function(){j();expect(b.add(".foo")).toBe(b)})});describe("item",function(){it("should return null if there are no items",function(){j();expect(b.item(0)).toBeNull()});it("should return null if an item at that index does not exist",function(){j(".foo");expect(b.item(g)).toBeNull()});it("should return the item at the specified index",function(){j(".foo");expect(b.item(2).dom.id).toBe("g")});describe("first",function(){it("should return null when there are no items",function(){j();expect(b.first()).toBeNull()});it("should return the first item",function(){j(".foo");expect(b.first().dom.id).toBe("a")})});describe("last",function(){it("should return null when there are no items",function(){j();expect(b.last()).toBeNull()});it("should return the last item",function(){j(".foo");expect(b.last().dom.id).toBe("o")})})});describe("each",function(){it("should never iterate if there are no items",function(){var n=0;j();b.each(function(){++n});expect(n).toBe(0)});it("should iterate over each item",function(){var n=0;j(".baz");b.each(function(){++n});expect(n).toBe(a)});it("should default the scope to the element",function(){var n;j(m("a"));b.each(function(o){n=(o==this)});expect(n).toBe(true)});it("should use a specified scope",function(){var p={},n;j(".foo");b.each(function(){n=this},p);expect(n).toBe(p)});it("should pass the element, the ce & the index",function(){var n;j(m("a"));b.each(function(q,o,p){n=[q.dom.id,o,p]});expect(n).toEqual(["a",b,0])});it("should exit upon returning false",function(){var n=0;j(".foo");b.each(function(o){if(o.dom.id=="d"){return false}++n});expect(n).toBe(1)});it("should return the CompositeElement",function(){j();expect(b.each(function(){})).toBe(b)})});describe("fill",function(){it("should clear any existing elements",function(){j(".foo");b.fill(null);expect(b.getCount()).toBe(0)});it("should accept a selector",function(){j(".foo");expect(b.getCount()).toBe(g);b.fill(".bar");expect(b.getCount()).toBe(h)});it("should accept an array of elements",function(){j();b.fill([m("a"),m("b")]);expect(b.getCount()).toBe(2)});it("should accept a NodeList",function(){j();b.fill(m("a").getElementsByTagName("div"));expect(b.getCount()).toBe(4)});it("should accept another CompositeElement",function(){var n=new Ext.CompositeElementLite();n.add(m("a"));n.add(m("b"));n.add(m("c"));j();b.fill(n);expect(b.getCount()).toBe(3)});it("should return the CompositeElement",function(){j();expect(b.fill(null)).toBe(b)})});describe("filter",function(){it("should accept a selector",function(){j(".foo");expect(b.getCount(g));expect(b.filter(".toFilter").getCount()).toBe(2)});it("should return the CompositeElement",function(){j();expect(b.filter(function(){})).toBe(b)});it("should accept a function",function(){j(".foo");b.filter(function(n){var o=n.dom.id;return o=="a"||o=="d"||o=="g"});expect(b.getCount()).toBe(3)});it("should set the scope to the element",function(){var n;j(m("a"));b.filter(function(){n=this.dom.id});expect(n).toBe("a")});it("should pass the element, the CompositeElement & the index",function(){var n;j(m("a"));b.filter(function(p,q,o){n=[p.dom.id,q,o]});expect(n).toEqual(["a",b,0])})});describe("indexOf",function(){it("should return -1 when there are no items",function(){j();expect(b.indexOf("a")).toBe(-1)});it("should return -1 when the item doesn't exist in the collection",function(){j(".bar");expect(b.indexOf("a")).toBe(-1)});it("should accept an id",function(){j(".foo");expect(b.indexOf("a")).toBe(0)});it("should accept an HTMLElement",function(){j(".foo");expect(b.indexOf(m("d"))).toBe(1)});it("should accept an Ext.dom.Element",function(){j(".foo");expect(b.indexOf(Ext.fly("g"))).toBe(2)})});describe("contains",function(){it("should return false when there are no items",function(){j();expect(b.contains("a")).toBe(false)});it("should return false when the item doesn't exist in the collection",function(){j(".bar");expect(b.contains("a")).toBe(false)});it("should accept an id",function(){j(".foo");expect(b.contains("a")).toBe(true)});it("should accept an HTMLElement",function(){j(".foo");expect(b.contains(m("d"))).toBe(true)});it("should accept an Ext.dom.Element",function(){j(".foo");expect(b.contains(Ext.fly("g"))).toBe(true)})});describe("removeElement",function(){it("should accept a string id",function(){j(".foo");b.removeElement("a");expect(b.contains("a")).toBe(false)});it("should accept an HTMLElement",function(){j(".foo");b.removeElement(m("a"));expect(b.contains("a")).toBe(false)});it("should accept an Ext.dom.Element",function(){j(".foo");b.removeElement(Ext.fly("a"));expect(b.contains("a")).toBe(false)});it("should accept an index",function(){j(".foo");b.removeElement(0);expect(b.contains("a")).toBe(false)});it("should remove the element if removeDom is specified",function(){j(".foo");b.removeElement("a",true);b.fill(".foo");expect(b.contains("a")).toBe(false)});it("should return the CompositeElement",function(){j();expect(b.removeElement(null)).toBe(b)})});describe("clear",function(){it("should do nothing when the collection is empty",function(){j();b.clear();expect(b.getCount()).toBe(0)});it("should remove all elements",function(){j(".foo");b.clear();expect(b.getCount()).toBe(0)})})});