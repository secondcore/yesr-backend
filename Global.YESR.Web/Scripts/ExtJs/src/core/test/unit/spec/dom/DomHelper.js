xdescribe("Ext.core.DomHelper",function(){var a={dom:{cleanBody:function(){document.getElementsByTagName("body")[0].innerHTML=""},parentNodeName:{"*":"div",frame:"frameset",col:"colgroup",colgroup:"table",option:"select",optgroup:"select",tbody:"table",thead:"table",tfoot:"table",tr:"tbody",td:"tr"},voidNode:{area:true,br:true,col:true,frame:true,hr:true,img:true,input:true,link:true,meta:true,param:true,range:true,spacer:true,wbr:true}},String:{html:function(c,d){var e="<"+c+" class="+d+">";if(!a.dom.voidNode[c]){e+="</"+c+">"}return e}}};xdescribe("useDom = false",function(){beforeEach(function(){Ext.core.DomHelper.useDom=false})});xdescribe("useDom = true",function(){beforeEach(function(){Ext.core.DomHelper.useDom=false});afterEach(function(){Ext.core.DomHelper.useDom=true})});function b(){var e=Ext.core.DomHelper,d,c;beforeEach(function(){d=Ext.getBody().createChild({id:"DomHelperHelper",children:[{cls:"child",id:"firstChild"},{cls:"child"},{cls:"child"},{cls:"child"},{cls:"child"},{cls:"child2"},{cls:"child2"},{cls:"child"},{cls:"child"},{cls:"child"}]});c=Ext.select("#DomHelperHelper > div")});afterEach(a.dom.cleanBody);describe("markup",function(){it("should return the markup for a string",function(){var f='<div class="class">my div!</div>';expect(e.markup(f)).toEqual(f)});it("should return the markup for an object",function(){var f='<div class="class"><span style="padding:10px;">test</span><br/></div>',g={cls:"class",children:[{tag:"span",html:"test",style:{padding:"10px"}},{tag:"br"}]};expect(e.markup(g)).toEqual(f)})});describe("applyStyles",function(){it("should apply styles from a string",function(){e.applyStyles(d,"padding:10px;");expect(d.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});it("should apply styles from an object",function(){e.applyStyles(d,{padding:"10px"});expect(d.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});xit("should apply styles from an object using numbers",function(){e.applyStyles(d,{padding:10});expect(d.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});it("should apply styles from a function",function(){e.applyStyles(d,function(){return{padding:"10px"}});expect(d.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)})});describe("insertHtml",function(){var g,f='<div id="newChild"></div>';describe("basic",function(){beforeEach(function(){g=Ext.getDom(c.first());expect(Ext.get("newChild")).toBeNull()});afterEach(function(){var h=document.getElementById("newChild");expect(h).toBeDefined();g.innerHTML=""});it("should insert a new element beforeBegin",function(){e.insertHtml("beforeBegin",g,f)});it("should insert a new element afterBegin",function(){e.insertHtml("afterBegin",g,f)});it("should insert a new element beforeEnd",function(){e.insertHtml("beforeEnd",g,f)});it("should insert a new element afterEnd",function(){e.insertHtml("afterEnd",g,f)});describe("textNode",function(){var h=0,j,i;beforeEach(function(){i=document.createTextNode(j="howdy"+(h++));g.appendChild(i);expect(g.firstChild).toEqual(i);expect(g.firstChild.nodeValue).toEqual(j)});afterEach(function(){expect(g.childNodes.length).toEqual(2);g.removeChild(i);expect(g.childNodes.length).toEqual(1);i=null;g.innerHTML="";expect(g.childNodes.length).toEqual(0)});it("should insert a new element beforeBegin",function(){e.insertHtml("beforeBegin",i,f)});it("should insert a new element afterBegin",function(){e.insertHtml("afterBegin",i,f)});it("should insert a new element beforeEnd",function(){e.insertHtml("beforeEnd",i,f)});it("should insert a new element afterEnd",function(){e.insertHtml("afterEnd",i,f)})})});describe("details",function(){var n={afterEnd:true,beforeBegin:true},i={afterBegin:true,beforeEnd:true},l={afterEnd:true,beforeBegin:true,afterBegin:true,beforeEnd:true};for(var j in a.dom.voidNode){m(n,j,j)}m(l,"div","div");m(l,"a","p");m(l,"a","a");m(i,"tr","td");m(n,"tr","tr");m(i,"tbody","tr");m(i,"tfoot","tr");m(i,"thead","tr");m(n,"tbody","tbody");m(n,"tbody","thead");m(n,"tbody","tfoot");m(n,"tfoot","tbody");m(n,"tfoot","thead");m(n,"tfoot","tfoot");m(n,"thead","tbody");m(n,"thead","thead");m(n,"thead","tfoot");function m(o,p,q){if(o.afterBegin){k("afterBegin",p,q)}if(o.beforeEnd){k("beforeEnd",p,q)}if(o.afterEnd){h("afterEnd",p,q)}if(o.beforeBegin){h("beforeBegin",p,q)}if(o.afterBegin||o.beforeEnd){it(["should overwrite the HTML","of a",p.toUpperCase(),"Element"].join(" "),function(){var r=a.String.html(q,"overwrite");var s=document.createElement(p);expect(s.parentNode).toBeNull();expect(s.childNodes.length).toBe(0);expect(s.firstChild).toBeNull();e.overwrite(s,r);expect(s.childNodes.length).toBe(1);expect(s.firstChild).toBeDefined();expect(s.firstChild.className).toBe("overwrite")});if(Ext.core.Element.prototype.setHTML){it(["should set the HTML","of a",p.toUpperCase(),"Element"].join(" "),function(){var r=a.String.html(q,"overwrite");var s=document.createElement(p);expect(s.parentNode).toBeNull();expect(s.childNodes.length).toBe(0);expect(s.firstChild).toBeNull();Ext.fly(s).setHTML(r);expect(s.childNodes.length).toBe(1);expect(s.firstChild).toBeDefined();expect(s.firstChild.className).toBe("overwrite")})}}}function k(o,p,q){it(["should insertHtml",q.toUpperCase(),o,"of a "+p.toUpperCase()+" Element","when it has no parentNode"].join(" "),function(){var r=a.String.html(q,o);var s=document.createElement(p);expect(s.parentNode).toBeNull();expect(s.childNodes.length).toBe(0);expect(s.firstChild).toBeNull();e.insertHtml(o,s,r);expect(s.childNodes.length).toBe(1);expect(s.firstChild).toBeDefined();expect(s.firstChild.className).toBe(o)})}function h(o,p,q){it(["should insertHtml",q.toUpperCase(),o,"of a "+p.toUpperCase()+" Element"].join(" "),function(){var s=a.String.html(q,o);var t=document.createElement(p);document.createElement(a.dom.parentNodeName[p]||a.dom.parentNodeName["*"]).appendChild(t);var r=t.parentNode;expect(r).toBeDefined();expect(t.childNodes.length).toBe(0);expect(t.firstChild).toBeNull();expect(r.childNodes.length).toBe(1);e.insertHtml(o,t,s);r.removeChild(t);expect(r.childNodes.length).toBe(1);expect(r.firstChild.tagName.toLowerCase()).toBe(q);expect(r.firstChild.className).toBe(o)})}})});describe("overwrite",function(){it("should overwrite the el",function(){var f=Ext.getDom(c.first());expect(f.innerHTML).toEqual("");e.overwrite(f,{tag:"span",html:"hello"});expect(f.innerHTML.toLowerCase()).toEqual("<span>hello</span>")});describe("table innerHTML bug",function(){it("should set the html of a tr Element, even when it has no parentNode",function(){var f=document.createElement("tr");expect(f.parentNode).toEqual(null);expect(f.childNodes.length).toEqual(0);e.overwrite(f,"<td>cell1");expect(f.childNodes.length).toEqual(1);expect(f.lastChild.innerHTML).toEqual("cell1");e.overwrite(f,"<td>cell2");expect(f.childNodes.length).toEqual(1);expect(f.lastChild.innerHTML).toEqual("cell2")});it("should set the html of an Element",function(){var f='<a href="http://mootools.net/">Link</a>';var g=document.createElement("div");e.overwrite(g,f);expect(g.innerHTML.toLowerCase()).toEqual(f.toLowerCase())});it("should set the html of an Element with multiple arguments",function(){var f=["<p>Paragraph</p>",'<a href="http://mootools.net/">Link</a>'];var g=document.createElement("div");e.overwrite(g,f);expect(g.innerHTML.toLowerCase()).toEqual(f.join("").toLowerCase())});it("should set the html of a select Element",function(){var g='<option>option 1</option><option selected="selected">option 2</option>';var f=document.createElement("select");e.overwrite(f,g);expect(f.childNodes.length).toEqual(2);expect(f.options.length).toEqual(2);expect(f.selectedIndex).toEqual(1)});it("should set the html of a table Element",function(){var f='<tbody><tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr></tbody>';var g=document.createElement("table");e.overwrite(g,f);expect(g.childNodes.length).toEqual(1);expect(g.firstChild.firstChild.childNodes.length).toEqual(2);expect(g.firstChild.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tbody Element",function(){var g='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var f=document.createElement("tbody");document.createElement("table").appendChild(f);e.overwrite(f,g);expect(f.childNodes.length).toEqual(2);expect(f.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a thead Element",function(){var f='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var g=document.createElement("thead");document.createElement("table").appendChild(g);e.overwrite(g,f);expect(g.childNodes.length).toEqual(2);expect(g.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tfoot Element",function(){var f='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var g=document.createElement("tfoot");document.createElement("table").appendChild(g);e.overwrite(g,f);expect(g.childNodes.length).toEqual(2);expect(g.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tr Element",function(){var f='<td class="cell">cell 1</td><td>cell 2</td>';var g=document.createElement("tr");document.createElement("tbody").appendChild(g);document.createElement("table").appendChild(g.parentNode);e.overwrite(g,f);expect(g.childNodes.length).toEqual(2);expect(g.firstChild.className).toEqual("cell")});it("should set the html of a td Element",function(){var f='<span class="span">Some Span</span><a href="#">Some Link</a>';var g=document.createElement("td");document.createElement("tr").appendChild(g);document.createElement("tbody").appendChild(g.parentNode);document.createElement("table").appendChild(g.parentNode.parentNode);e.overwrite(g,f);expect(g.childNodes.length).toEqual(2);expect(g.firstChild.className).toEqual("span")})})})}});