Ext.EventManager=new function(){var a=this,d=document,c=window,b=function(){var i=d.body||d.getElementsByTagName("body")[0],h=Ext.baseCSSPrefix,f=[h+"body"],e=[],g;if(!i){return false}g=i.parentNode;function j(k){f.push(h+k)}if(Ext.isIE){j("ie");if(Ext.isIE6){j("ie6")}else{j("ie7p");if(Ext.isIE7){j("ie7")}else{j("ie8p");if(Ext.isIE8){j("ie8")}else{j("ie9p");if(Ext.isIE9){j("ie9")}}}}if(Ext.isIE6||Ext.isIE7){j("ie7m")}if(Ext.isIE6||Ext.isIE7||Ext.isIE8){j("ie8m")}if(Ext.isIE7||Ext.isIE8){j("ie78")}}if(Ext.isGecko){j("gecko");if(Ext.isGecko3){j("gecko3")}if(Ext.isGecko4){j("gecko4")}if(Ext.isGecko5){j("gecko5")}}if(Ext.isOpera){j("opera")}if(Ext.isWebKit){j("webkit")}if(Ext.isSafari){j("safari");if(Ext.isSafari2){j("safari2")}if(Ext.isSafari3){j("safari3")}if(Ext.isSafari4){j("safari4")}if(Ext.isSafari5){j("safari5")}if(Ext.isSafari5_0){j("safari5_0")}}if(Ext.isChrome){j("chrome")}if(Ext.isMac){j("mac")}if(Ext.isLinux){j("linux")}if(!Ext.supports.CSS3BorderRadius){j("nbr")}if(!Ext.supports.CSS3LinearGradient){j("nlg")}if(!Ext.scopeResetCSS){j("reset")}if(g){if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){Ext.isBorderBox=false}else{Ext.isBorderBox=true}if(Ext.isBorderBox){e.push(h+"border-box")}if(Ext.isStrict){e.push(h+"strict")}else{e.push(h+"quirks")}Ext.fly(g,"_internal").addCls(e)}Ext.fly(i,"_internal").addCls(f);return true};Ext.apply(a,{hasBoundOnReady:false,hasFiredReady:false,deferReadyEvent:1,onReadyChain:[],readyEvent:(function(){var e=new Ext.util.Event();e.fire=function(){Ext._beforeReadyTime=Ext._beforeReadyTime||new Date().getTime();e.self.prototype.fire.apply(e,arguments);Ext._afterReadytime=new Date().getTime()};return e}()),idleEvent:new Ext.util.Event(),isReadyPaused:function(){return(/[?&]ext-pauseReadyFire\b/i.test(location.search)&&!Ext._continueFireReady)},bindReadyEvent:function(){if(a.hasBoundOnReady){return}if(d.readyState=="complete"){a.onReadyEvent({type:d.readyState||"body"})}else{document.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false);a.hasBoundOnReady=true}},onReadyEvent:function(f){if(f&&f.type){a.onReadyChain.push(f.type)}if(a.hasBoundOnReady){document.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}if(!Ext.isReady){a.fireDocReady()}},fireDocReady:function(){if(!Ext.isReady){Ext._readyTime=new Date().getTime();Ext.isReady=true;Ext.supports.init();a.onWindowUnload();a.readyEvent.onReadyChain=a.onReadyChain;if(Ext.isNumber(a.deferReadyEvent)){Ext.Function.defer(a.fireReadyEvent,a.deferReadyEvent);a.hasDocReadyTimer=true}else{a.fireReadyEvent()}}},fireReadyEvent:function(){var e=a.readyEvent;a.hasDocReadyTimer=false;a.isFiring=true;while(e.listeners.length&&!a.isReadyPaused()){e.fire()}a.isFiring=false;a.hasFiredReady=true},onDocumentReady:function(g,f,e){e=e||{};e.single=true;a.readyEvent.addListener(g,f,e);if(!(a.isFiring||a.hasDocReadyTimer)){if(Ext.isReady){a.fireReadyEvent()}else{a.bindReadyEvent()}}},stoppedMouseDownEvent:new Ext.util.Event(),propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(e){var f;e=Ext.getDom(e);if(e===d||e===c){f=e===d?Ext.documentId:Ext.windowId}else{f=Ext.id(e)}if(!Ext.cache[f]){Ext.addCacheEntry(f,null,e)}return f},prepareListenerConfig:function(h,f,j){var k=a.propRe,g,i,e;for(g in f){if(f.hasOwnProperty(g)){if(!k.test(g)){i=f[g];if(typeof i=="function"){e=[h,g,i,f.scope,f]}else{e=[h,g,i.fn,i.scope,i]}if(j){a.removeListener.apply(a,e)}else{a.addListener.apply(a,e)}}}}},mouseEnterLeaveRe:/mouseenter|mouseleave/,normalizeEvent:function(e,f){if(a.mouseEnterLeaveRe.test(e)&&!Ext.supports.MouseEnterLeave){if(f){f=Ext.Function.createInterceptor(f,a.contains)}e=e=="mouseenter"?"mouseover":"mouseout"}else{if(e=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera){e="DOMMouseScroll"}}return{eventName:e,fn:f}},contains:function(f){var e=f.browserEvent.currentTarget,g=a.getRelatedTarget(f);if(e&&e.firstChild){while(g){if(g===e){return false}g=g.parentNode;if(g&&(g.nodeType!=1)){g=null}}}return true},addListener:function(g,e,j,i,f){if(typeof e!=="string"){a.prepareListenerConfig(g,e);return}var k=g.dom||Ext.getDom(g),l,h;if(!j){Ext.Error.raise({sourceClass:"Ext.EventManager",sourceMethod:"addListener",targetElement:g,eventName:e,msg:'Error adding "'+e+'" listener. The handler function is undefined.'})}f=f||{};l=a.normalizeEvent(e,j);h=a.createListenerWrap(k,e,l.fn,i,f);if(k.attachEvent){k.attachEvent("on"+l.eventName,h)}else{k.addEventListener(l.eventName,h,f.capture||false)}if(k==d&&e=="mousedown"){a.stoppedMouseDownEvent.addListener(h)}a.getEventListenerCache(g.dom?g:k,e).push({fn:j,wrap:h,scope:i})},removeListener:function(o,p,q,s){if(typeof p!=="string"){a.prepareListenerConfig(o,p,true);return}var m=Ext.getDom(o),g=o.dom?o:Ext.get(m),e=a.getEventListenerCache(g,p),r=a.normalizeEvent(p).eventName,n=e.length,l,h,f,k;while(n--){h=e[n];if(h&&(!q||h.fn==q)&&(!s||h.scope===s)){f=h.wrap;if(f.task){clearTimeout(f.task);delete f.task}l=f.tasks&&f.tasks.length;if(l){while(l--){clearTimeout(f.tasks[l])}delete f.tasks}if(m.detachEvent){m.detachEvent("on"+r,f)}else{m.removeEventListener(r,f,false)}if(f&&m==d&&p=="mousedown"){a.stoppedMouseDownEvent.removeListener(f)}Ext.Array.erase(e,n,1)}}},removeAll:function(h){var i=h.dom?h:Ext.get(h),f,g,e;if(!i){return}f=(i.$cache||i.getCache());g=f.events;for(e in g){if(g.hasOwnProperty(e)){a.removeListener(i,e)}}f.events={}},purgeElement:function(h,f){var j=Ext.getDom(h),g=0,e;if(f){a.removeListener(h,f)}else{a.removeAll(h)}if(j&&j.childNodes){for(e=h.childNodes.length;g<e;g++){a.purgeElement(h.childNodes[g],f)}}},createListenerWrap:function(i,h,l,m,n){n=n||{};var k,j,e=/\\/g,g=function(o,f){if(!j){k=["if(!"+Ext.name+") {return;}"];if(n.buffer||n.delay||n.freezeEvent){k.push("e = new X.EventObjectImpl(e, "+(n.freezeEvent?"true":"false")+");")}else{k.push("e = X.EventObject.setEvent(e);")}if(n.delegate){k.push('var t = e.getTarget("'+(n.delegate+"").replace(e,"\\\\")+'", this);');k.push("if(!t) {return;}")}else{k.push("var t = e.target;")}if(n.target){k.push("if(e.target !== options.target) {return;}")}if(n.stopEvent){k.push("e.stopEvent();")}else{if(n.preventDefault){k.push("e.preventDefault();")}if(n.stopPropagation){k.push("e.stopPropagation();")}}if(n.normalized===false){k.push("e = e.browserEvent;")}if(n.buffer){k.push("(wrap.task && clearTimeout(wrap.task));");k.push("wrap.task = setTimeout(function() {")}if(n.delay){k.push("wrap.tasks = wrap.tasks || [];");k.push("wrap.tasks.push(setTimeout(function() {")}k.push("fn.call(scope || dom, e, t, options);");if(n.single){k.push("evtMgr.removeListener(dom, ename, fn, scope);")}if(h!=="mousemove"){k.push("if (evtMgr.idleEvent.listeners.length) {");k.push("evtMgr.idleEvent.fire();");k.push("}")}if(n.delay){k.push("}, "+n.delay+"));")}if(n.buffer){k.push("}, "+n.buffer+");")}j=Ext.cacheableFunctionFactory("e","options","fn","scope","ename","dom","wrap","args","X","evtMgr",k.join("\n"))}j.call(i,o,n,l,m,h,i,g,f,Ext,a)};return g},getEventListenerCache:function(h,e){var g,f;if(!h){return[]}if(h.$cache){g=h.$cache}else{g=Ext.cache[a.getId(h)]}f=g.events||(g.events={});return f[e]||(f[e]=[])},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(e){a.stopPropagation(e);a.preventDefault(e)},stopPropagation:function(e){e=e.browserEvent||e;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}},preventDefault:function(f){f=f.browserEvent||f;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false;try{if(f.ctrlKey||f.keyCode>111&&f.keyCode<124){f.keyCode=-1}}catch(g){}}},getRelatedTarget:function(e){e=e.browserEvent||e;var f=e.relatedTarget;if(!f){if(a.mouseLeaveRe.test(e.type)){f=e.toElement}else{if(a.mouseEnterRe.test(e.type)){f=e.fromElement}}}return a.resolveTextNode(f)},getPageX:function(e){return a.getPageXY(e)[0]},getPageY:function(e){return a.getPageXY(e)[1]},getPageXY:function(g){g=g.browserEvent||g;var f=g.pageX,i=g.pageY,h=d.documentElement,e=d.body;if(!f&&f!==0){f=g.clientX+(h&&h.scrollLeft||e&&e.scrollLeft||0)-(h&&h.clientLeft||e&&e.clientLeft||0);i=g.clientY+(h&&h.scrollTop||e&&e.scrollTop||0)-(h&&h.clientTop||e&&e.clientTop||0)}return[f,i]},getTarget:function(e){e=e.browserEvent||e;return a.resolveTextNode(e.target||e.srcElement)},resolveTextNode:Ext.isGecko?function(f){if(!f){return}var e=HTMLElement.prototype.toString.call(f);if(e=="[xpconnect wrapped native prototype]"||e=="[object XULElement]"){return}return f.nodeType==3?f.parentNode:f}:function(e){return e&&e.nodeType==3?e.parentNode:e},curWidth:0,curHeight:0,onWindowResize:function(h,g,f){var e=a.resizeEvent;if(!e){a.resizeEvent=e=new Ext.util.Event();a.on(c,"resize",a.fireResize,null,{buffer:100})}e.addListener(h,g,f)},fireResize:function(){var e=Ext.Element.getViewWidth(),f=Ext.Element.getViewHeight();if(a.curHeight!=f||a.curWidth!=e){a.curHeight=f;a.curWidth=e;a.resizeEvent.fire(e,f)}},removeResizeListener:function(g,f){var e=a.resizeEvent;if(e){e.removeListener(g,f)}},onWindowUnload:function(h,g,f){var e=a.unloadEvent;if(!e){a.unloadEvent=e=new Ext.util.Event();a.addListener(c,"unload",a.fireUnload)}if(h){e.addListener(h,g,f)}},fireUnload:function(){try{d=c=undefined;var l,g,j,h,f;a.unloadEvent.fire();if(Ext.isGecko3){l=Ext.ComponentQuery.query("gridview");g=0;j=l.length;for(;g<j;g++){l[g].scrollToTop()}}f=Ext.cache;for(h in f){if(f.hasOwnProperty(h)){a.removeAll(h)}}}catch(k){}},removeUnloadListener:function(g,f){var e=a.unloadEvent;if(e){e.removeListener(g,f)}},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera),getKeyEvent:function(){return a.useKeyDown?"keydown":"keypress"}});if(!("addEventListener" in document)&&document.attachEvent){Ext.apply(a,{pollScroll:function(){var f=true;try{document.documentElement.doScroll("left")}catch(g){f=false}if(f){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimeout=setTimeout(a.pollScroll,20)}return f},scrollTimeout:null,readyStatesRe:/complete/i,checkReadyState:function(){var e=document.readyState;if(a.readyStatesRe.test(e)){a.onReadyEvent({type:e})}},bindReadyEvent:function(){var f=true;if(a.hasBoundOnReady){return}try{f=!window.frameElement}catch(g){}if(!f||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}if(a.pollScroll()===true){return}if(d.readyState=="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.checkReadyState);window.attachEvent("onload",a.onReadyEvent);a.hasBoundOnReady=true}},onReadyEvent:function(f){if(f&&f.type){a.onReadyChain.push(f.type)}if(a.hasBoundOnReady){document.detachEvent("onreadystatechange",a.checkReadyState);window.detachEvent("onload",a.onReadyEvent)}if(Ext.isNumber(a.scrollTimeout)){clearTimeout(a.scrollTimeout);delete a.scrollTimeout}if(!Ext.isReady){a.fireDocReady()}},onReadyChain:[]})}Ext.onReady=function(g,f,e){Ext.Loader.onReady(g,f,true,e)};Ext.onDocumentReady=a.onDocumentReady;a.on=a.addListener;a.un=a.removeListener;Ext.onReady(b)};