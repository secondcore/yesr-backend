Ext.define("Ext.grid.feature.GroupingSummary",{extend:"Ext.grid.feature.Grouping",alias:"feature.groupingsummary",mixins:{summary:"Ext.grid.feature.AbstractSummary"},init:function(){this.mixins.summary.init.call(this)},getFeatureTpl:function(){var a=this.callParent(arguments);if(this.showSummaryRow){a=a.replace("</tpl>","");a+="{[this.printSummaryRow(xindex)]}</tpl>"}return a},getFragmentTpl:function(){var b=this,a=b.callParent();Ext.apply(a,b.getSummaryFragments());if(b.showSummaryRow){b.summaryGroups=b.view.store.getGroups();b.summaryData=b.generateSummaryData()}return a},getPrintData:function(h){var j=this,e=j.view.headerCt.getColumnsForTpl(),g=0,b=e.length,f=[],a=j.summaryGroups[h-1].name,d=j.summaryData[a],c;for(;g<b;++g){c=e[g];c.gridSummaryValue=this.getColumnValue(c,d);f.push(c)}return f},generateSummaryData:function(){var r=this,t={},m={},g=r.view.store,q=this.getGroupField(),a=g.proxy.reader,p=r.summaryGroups,b=r.view.headerCt.getColumnsForTpl(),h,n,e,c,l,u,o,j,k,f,d;for(n=0,e=p.length;n<e;++n){t[p[n].name]={}}if(r.remoteRoot&&a.rawData){l=a.root;a.root=r.remoteRoot;a.buildExtractors(true);j=a.getRoot(a.rawData);f=j.length;if(!a.convertRecordData){a.buildExtractors()}for(k=0;k<f;k++){d={};a.convertRecordData(d,j[k]);m[d[q]]=d}a.root=l;a.buildExtractors(true)}for(n=0,e=b.length;n<e;++n){o=Ext.getCmp(b[n].id);c=r.getSummary(g,o.summaryType,o.dataIndex,true);for(u in c){if(c.hasOwnProperty(u)){t[u][o.id]=c[u]}}for(u in m){if(m.hasOwnProperty(u)){h=m[u][o.dataIndex];if(h!==undefined&&t[u]!==undefined){t[u][o.id]=h}}}}return t}});