Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:true,nameProperty:"name",isWriter:true,constructor:function(a){Ext.apply(this,a)},write:function(e){var c=e.operation,b=c.records||[],a=b.length,d=0,f=[];for(;d<a;d++){f.push(this.getRecordData(b[d],c))}return this.writeRecords(e,f)},getRecordData:function(g,d){var m=g.phantom===true,b=this.writeAllFields||m,c=this.nameProperty,h=g.fields,o=h.items,e={},l=g.clientIdProperty,k,a,j,n,i,p;if(b){p=o.length;for(i=0;i<p;i++){j=o[i];if(j.persist){a=j[c]||j.name;e[a]=g.get(j.name)}}}else{k=g.getChanges();for(n in k){if(k.hasOwnProperty(n)){j=h.get(n);a=j[c]||j.name;e[a]=k[n]}}}if(m){if(l&&d&&d.records.length>1){e[l]=g.internalId}}else{e[g.idProperty]=g.getId()}return e}});