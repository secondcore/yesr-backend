Ext.define("Ext.tree.plugin.TriState",{alias:"plugin.tristate",init:function(a){a.updateParent=function(c){if(c!=null&&c.get("checked")!=null){var b=-1;c.eachChild(function(e){var d=e.get("tristate");if(b==-1){b=d}else{if(d!=b){b=2;return false}}});if(b!=-1){c.set("tristate",b)}c.set("checked",b==1);c.set("cls",(b==0?"x-tree-node":(b==1?"x-tree-node-checked":"x-tree-node-grayed")));this.updateParent(c.parentNode)}};a.on({itemmouseenter:function(c,g,f,b,h){var d=g.get("tristate");if(h.getTarget().tagName.toUpperCase()=="INPUT"){g.set("cls",(d==0?"x-tree-node":(d==1?"x-tree-node-checked":"x-tree-node-grayed"))+"-over")}else{g.set("cls",(d==0?"x-tree-node":(d==1?"x-tree-node-checked":"x-tree-node-grayed")))}},itemmouseleave:function(c,g,f,b,h){var d=g.get("tristate");g.set("cls",(d==0?"x-tree-node":(d==1?"x-tree-node-checked":"x-tree-node-grayed")))},beforeselect:function(b,c){return false},itemclick:function(b,c){this.fireEvent("checkchange",c,!c.get("checked"))},checkchange:function(e,d){if(e==null){return}value=e.get("tristate");newValue=d?1:0;var c=this.fireEvent("beforetristate",e,newValue);if(c){var b=[];e.cascadeBy(function(f){f.set("checked",d);f.set("tristate",newValue);f.set("cls",d?"x-tree-node-checked":"x-tree-node");b[b.length]=f});e.set("checked",d);e.set("tristate",newValue);e.set("cls",d?"x-tree-node-checked":"x-tree-node");this.updateParent(e.parentNode);this.fireEvent("tristate",e,newValue,b)}}});a.setAllChecked=function(b){this.getRootNode().set("checked",b);this.fireEvent("checkchange",rec,b)};a.setChecked=function(e,b){var d=this.store.getNodeById(e);if(d==null){throw new Error("Tree node not found.")}var c=d.parentNode;while(c!=null){c.expand();c=c.parentNode}d.set("checked",b);this.fireEvent("checkchange",d,b)};a.getChecked=function(){this.getChecked(0,false)};a.getChecked=function(d,c){var b=[];this.getRootNode().cascadeBy(function(f){var e=f.get("tristate");if(e>0&&(c||e==1)&&f.get("level")>=(d || 0)){b.push(f)}});return b};a.getCheckedLeafs=function(){var b=[];this.getRootNode().cascadeBy(function(c){if(c.isLeaf()&&c.get("tristate")>0){b.push(c)}});return b}}});